#!/bin/bash

#       PROJECT: stackfor
#      FILENAME: add
#         BUILD: 170907
#   DESCRIPTION: Adds non-stack components to an environment.
#       AUTHORS: Christopher Banwarth (development@aprettycoolprogram.com)
#     COPYRIGHT: 2017 A Pretty Cool Program
#       LICENSE: Apache License, Version 2.0 [http://www.apache.org/licenses/LICENSE-2.0]
#     MORE INFO: http://aprettycoolprogram.com/stackfor

source "$stackforBin/stackforengine"

case "$1" in
    # EDITORS
    "code")
        if [[ ! -f $stackforHistory/code.repository ]]; then
            curl https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.gpg
            sudo mv microsoft.gpg /etc/apt/trusted.gpg.d/microsoft.gpg
            sudo sh -c 'echo "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main" > /etc/apt/sources.list.d/vscode.list'
            touch $stackforHistory/code.repository
        fi | tee -a $stackforLogs/code.repository
        InstallPackageMinimal curl apt-transport-https
        InstallPackage code
        ;;
    "emacs")
        InstallPackageMinimal emacs
        ;;
    "vim")
        InstallPackageMinimal vim
        ;;
    "editors")
        eval $stackforStackers/add code
        eval $stackforStackers/add emacs
        if [[ $2 == "--all" ]]; then
            eval $stackforStackers/add vim
        fi
        ;;
    # GUI
    "xorg")
        InstallPackage xorg
        ;;    
    "xfce")
        eval $stackforStackers/add xorg
        InstallPackageMinimal xfce4
        InstallPackage tango-icon-theme xfce4-terminal
        ;;
    "gui")
        eval $stackforStackers/add xorg
        eval $stackforStackers/add xfce
        ;;
    # CLI APPLICATIONS
    "htop")
        InstallPackageMinimal htop
        ;;
    "openssh")
        InstallPackageMinimal openssh-server
        ;;
    "cli-apps")
        eval $stackforStackers/add htop
        eval $stackforStackers/add openssh
        ;;
    # GUI APPLICATIONS
    "filezilla")
        InstallPackageMinimal filezilla
        ;;
    "pidgin")
        InstallPackageMinimal pidgin
        ;;
    "gimp")
        InstallPackageMinimal gimp
        ;;
    "gui-apps")
        eval $stackforStackers/add filezilla
        eval $stackforStackers/add pidgin
        eval $stackforStackers/add gimp
        ;;
    # BROWSERS
    "firefox")
        InstallPackageMinimal firefox
        ;;
    "chromium")
        InstallPackageMinimal chromium
        ;;
    "browsers")
        eval $stackforStackers/add firefox
        eval $stackforStackers/add chromium
        ;;
    # VIRTUALIZATION TOOLS
    "vbox-tools")
        if [[ ! -f $stackforHistory/vbox-tools.install ]]; then
            wget -P $stackfornTemp http://download.virtualbox.org/virtualbox/5.1.26/VBoxGuestAdditions_5.1.26.iso
            sudo mount $stackforTemp/VBoxGuestAdditions_5.1.26.iso /media/cdrom
            sudo cp /media/cdrom/VBoxLinuxAdditions.run $stackforTemp
            sudo $stackforTemp/VBoxLinuxAdditions.run
            sudo usermod -a -G vboxsf crispy
            sudo umount /media/cdrom
            touch $stackforHistory/vbox-tools.install
        fi | tee -a $stackforLogs/vbox-tools.install
        ;;
    *) 
        echo "NOPE"
        ;;
esac



