#!/bin/bash

#       PROJECT: stackfor
#      FILENAME: add
#         BUILD: 170911
#   DESCRIPTION: Adds non-stack components to an environment.
#       AUTHORS: Christopher Banwarth (development@aprettycoolprogram.com)
#     COPYRIGHT: 2017 A Pretty Cool Program
#       LICENSE: Apache License, Version 2.0 [http://www.apache.org/licenses/LICENSE-2.0]
#     MORE INFO: http://aprettycoolprogram.com/stackfor

source "$sfBin/stackforengine"

case "$1" in
    # EDITORS
    "code")
        if [[ ! -f $sfHistory/code.install ]]; then
            InstallPackageMinimal libasound2 ca-certificates
            if [[ "$bitLevel" == "x86_64" ]]; then
                wget -O $sfTemp/code.deb https://go.microsoft.com/fwlink/?LinkID=760868
            else
                wget -O $sfTemp/code.deb https://go.microsoft.com/fwlink/?LinkID=760680
            fi
            sudo dpkg -i $sfTemp/code.deb
            sudo apt-get install -y -f
            touch $sfHistory/code.install
        fi | tee -a $sfLogs/code.log
        ;;
    "emacs")
        InstallPackageMinimal emacs
        ;;
    "vim")
        InstallPackageMinimal vim
        ;;
    "editors")
        eval $sfBin/add code
        eval $sfBin/add emacs
        if [[ $2 == "--all" ]]; then
            eval $sfBin/add vim
        fi
        ;;
    "mousepad")
        InstallPackageMinimal mousepad
        ;;
    # GUI
    "xorg")
        InstallPackage xorg
        ;;    
    "xfce")
        eval $sfBin/add xorg
        InstallPackageMinimal xfce4
        InstallPackage tango-icon-theme xfce4-terminal
        ;;
    "gui")
        eval $sfBin/add xorg
        eval $sfBin/add xfce
        ;;
    # CLI APPLICATIONS
    "htop")
        InstallPackageMinimal htop
        ;;
    "openssh")
        InstallPackageMinimal openssh-server
        ;;
    "cli-apps")
        eval $sfBin/add htop
        eval $sfBin/add openssh
        ;;
    # GUI APPLICATIONS
    "filezilla")
        InstallPackageMinimal filezilla
        ;;
    "pidgin")
        InstallPackageMinimal pidgin
        ;;
    "gimp")
        InstallPackageMinimal gimp
        ;;
    "gui-apps")
        eval $sfBin/add filezilla
        eval $sfBin/add pidgin
        eval $sfBin/add gimp
        ;;
    # BROWSERS
    "firefox")
        InstallPackageMinimal iceweasel
        ;;
    "chromium")
        InstallPackageMinimal chromium
        ;;
    "browsers")
        eval $sfBin/add firefox
        eval $sfBin/add chromium
        ;;
    # VIRTUALIZATION TOOLS
    "vbox-tools")
        InstallPackageMinimal build-essential linux-headers-$(uname -r)
        if [[ ! -f $sfHistory/vbox-tools.install ]]; then
            wget -P $sfTemp http://download.virtualbox.org/virtualbox/5.1.26/VBoxGuestAdditions_5.1.26.iso | tee -a $sfLogs/vbox-tools.install
            sudo mount $sfTemp/VBoxGuestAdditions_5.1.26.iso /media/cdrom | tee -a $sfLogs/vbox-tools.install
            sudo cp /media/cdrom/VBoxLinuxAdditions.run $sfTemp | tee -a $sfLogs/vbox-tools.install
            sudo $sfTemp/VBoxLinuxAdditions.run | tee -a $sfLogs/vbox-tools.install
            sudo usermod -a -G vboxsf crispy | tee -a $sfLogs/vbox-tools.install
            sudo umount /media/cdrom | tee -a $sfLogs/vbox-tools.install
            touch $sfHistory/vbox-tools.install
        fi
        ;;
    *) 
        echo "NOPE"
        ;;
esac



